<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divine Chat - Athena's Wisdom</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/goddess.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
</head>
<body class="chat-page">
    <!-- Greek Temple Background -->
    <div class="temple-background">
        <div class="marble-columns"></div>
        <div class="golden-particles"></div>
    </div>

    <!-- Navigation -->
    <nav class="divine-nav">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-crown"></i>
                <span>ATHENA'S WISDOM</span>
            </div>
            <div class="nav-links">
                <a href="/" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="/upload" class="nav-link">
                    <i class="fas fa-upload"></i>
                    <span>Upload</span>
                </a>
                <a href="/studio" class="nav-link">
                    <i class="fas fa-palette"></i>
                    <span>Studio</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Chat Container -->
    <div class="chat-container">
        <div class="chat-header">
            <div class="athena-avatar large">
                <lottie-player
                    src="https://lottie.host/7e5b8a54-5a5f-4b9b-be97-2c6b3d7f3a8d/QcYm8yDlGP.json"
                    background="transparent"
                    speed="0.8"
                    style="width: 100px; height: 100px;"
                    loop
                    autoplay>
                </lottie-player>
            </div>
            <div class="chat-title">
                <h1>Athena's Divine Wisdom</h1>
                <p>Ask me anything about your sacred sources</p>
                <div class="divine-stats">
                    <span class="stat">
                        <lottie-player
                            src="https://lottie.host/03ffe4b0-0d96-4d1a-be7e-5e8c3f8e7c94/LNS3DlLQYL.json"
                            background="transparent"
                            speed="1"
                            style="width: 20px; height: 20px;"
                            loop
                            autoplay>
                        </lottie-player>
                        {{ files|length if files else 0 }} Sacred Sources
                    </span>
                    <span class="stat">
                        <lottie-player
                            src="https://lottie.host/c2b1e4f5-3d8a-4a6b-9e5f-8a7b6c9d0e1f/DlQYLNS3.json"
                            background="transparent"
                            speed="1"
                            style="width: 20px; height: 20px;"
                            loop
                            autoplay>
                        </lottie-player>
                        Divine Insights Ready
                    </span>
                </div>
            </div>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="welcome-message">
                <div class="goddess-greeting">
                    <div class="greeting-icon">
                        <i class="fas fa-sparkles"></i>
                    </div>
                    <h2>Welcome to Divine Wisdom</h2>
                    <p>I am Athena, goddess of wisdom and knowledge. I have analyzed your sacred sources and am ready to answer your questions with divine insight.</p>

                    {% if files %}
                    <div class="source-preview">
                        <h3>Your Sacred Sources:</h3>
                        <div class="source-grid">
                            {% for file in files %}
                            <div class="source-card mini">
                                <div class="source-icon">
                                    <i class="fas fa-file-alt"></i>
                                </div>
                                <span>{{ file.original_name }}</span>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}

                    <div class="suggested-starters">
                        <h3>Divine Suggestions:</h3>
                        <div class="starter-buttons">
                            <button class="starter-btn" onclick="startConversation(this)">
                                <i class="fas fa-lightbulb"></i>
                                <span>Summarize my sources</span>
                            </button>
                            <button class="starter-btn" onclick="startConversation(this)">
                                <i class="fas fa-question-circle"></i>
                                <span>Generate study questions</span>
                            </button>
                            <button class="starter-btn" onclick="startConversation(this)">
                                <i class="fas fa-chart-line"></i>
                                <span>Create a mind map</span>
                            </button>
                            <button class="starter-btn" onclick="startConversation(this)">
                                <i class="fas fa-magic"></i>
                                <span>Explain key concepts</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="chat-input-area">
            <div class="chat-input-container">
                <div class="input-wrapper">
                    <textarea
                        id="chatInput"
                        class="chat-input"
                        placeholder="Ask Athena for divine wisdom..."
                        rows="1"></textarea>
                    <div class="input-actions">
                        <button class="action-btn" onclick="attachFile()" title="Add Source">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <button class="send-btn" onclick="sendMessage()" title="Send Message">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="input-info">
                <span class="source-count">{{ files|length if files else 0 }} sources available</span>
                <span class="typing-indicator" id="typingIndicator" style="display: none;">
                    <i class="fas fa-sparkles"></i>
                    Athena is thinking...
                </span>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/divine-animations.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
</body>
</html>